/*! For license information please see main.68fd2657.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),a=n(853);function l(e){for(var t="https://e4f87101-35d9-4339-9777-88089f139507.preview.emergentagent.com",ga=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(!0),[a,o]=(0,l.useState)(""),[i,s]=(0,l.useState)(""),[c,u]=(0,l.useState)(null),[d,f]=(0,l.useState)(!1);(0,l.useEffect)((()=>{p()}),[]);const p=async()=>{try{r(!0),o("");const e=await ur.get("".concat(ya,"/api/newspapers/archive"));t(e.data)}catch(a){console.error("Failed to fetch archive:",a),o("Failed to load archive")}finally{r(!1)}},h=e.filter((e=>e.week_of.toLowerCase().includes(i.toLowerCase())||e.title.toLowerCase().includes(i.toLowerCase()))),m=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return n?(0,dr.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,dr.jsx)("div",{className:"loading",children:(0,dr.jsx)("div",{className:"roman-header text-xl",children:"Loading archive..."})})}):c?(0,dr.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8",children:[(0,dr.jsxs)("div",{className:"mb-6",children:[(0,dr.jsx)("button",{onClick:()=>u(null),className:"flex items-center space-x-2 text-yellow-600 hover:text-yellow-700 transition-colors mb-4",children:"\u2190 Back to Archive"}),(0,dr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dr.jsxs)("div",{children:[(0,dr.jsx)("h1",{className:"roman-header text-3xl font-bold mb-2",children:c.title}),(0,dr.jsxs)("p",{className:"text-gray-600 text-lg",children:["Week ",c.week_of," \u2022 Published ",m(c.published_at)]})]}),(0,dr.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(y=c.stories)||void 0===y?void 0:y.length)||0," stories"]})]})]}),(0,dr.jsx)(da,{newspaper:c})]}):(0,dr.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8",children:[(0,dr.jsxs)("div",{className:"mb-8",children:[(0,dr.jsx)("h1",{className:"roman-header text-3xl font-bold mb-2",children:"Archive"}),(0,dr.jsx)("p",{className:"text-gray-600 text-lg",children:"Browse past editions of your Acta Diurna newspaper"})]}),a&&(0,dr.jsx)("div",{className:"error mb-6",children:a}),(0,dr.jsx)("div",{className:"mb-6",children:(0,dr.jsxs)("div",{className:"relative",children:[(0,dr.jsx)(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,dr.jsx)("input",{type:"text",placeholder:"Search by week or title...",value:i,onChange:e=>s(e.target.value),className:"roman-input w-full pl-10"})]})}),0===h.length?(0,dr.jsxs)("div",{className:"roman-column rounded-lg p-8 text-center",children:[(0,dr.jsx)(Nr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,dr.jsx)("h2",{className:"roman-header text-2xl font-semibold mb-4",children:0===e.length?"No Newspapers Yet":"No Results Found"}),(0,dr.jsx)("p",{className:"text-gray-600 mb-6",children:0===e.length?"Your newspaper archive will appear here once you start publishing weekly editions.":"Try adjusting your search terms to find the newspaper you're looking for."}),0===e.length&&(0,dr.jsx)("button",{onClick:()=>window.location.href="/stories",className:"roman-button",children:"Write Your First Story"})]}):(0,dr.jsx)("div",{className:"space-y-4",children:h.map((e=>{const t=(e=>{const[t,n]=e.split("-W"),r=new Date(parseInt(t),0,1),a=7*(parseInt(n)-1),l=new Date(r.getTime()+24*a*60*60*1e3),o=new Date(l.getTime()+5184e5);return{start:l.toLocaleDateString("en-US",{month:"short",day:"numeric"}),end:o.toLocaleDateString("en-US",{month:"short",day:"numeric"})}})(e.week_of);return(0,dr.jsxs)("div",{className:"roman-column rounded-lg p-6 hover:shadow-lg transition-shadow",children:[(0,dr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,dr.jsxs)("div",{className:"flex-1",children:[(0,dr.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,dr.jsx)("h3",{className:"roman-header text-xl font-semibold text-gray-900",children:e.title}),(0,dr.jsx)("span",{className:"text-sm text-gray-500",children:"\u2022"}),(0,dr.jsxs)("span",{className:"text-sm font-medium text-yellow-700",children:["Week ",e.week_of]})]}),(0,dr.jsxs)("p",{className:"text-gray-600 mb-3",children:["Published ",m(e.published_at)]}),(0,dr.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[(0,dr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dr.jsx)(oa,{className:"w-4 h-4"}),(0,dr.jsxs)("span",{children:[e.story_count," stories"]})]}),(0,dr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dr.jsx)(wr,{className:"w-4 h-4"}),(0,dr.jsxs)("span",{children:[e.contributor_count," contributors"]})]}),(0,dr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dr.jsx)(Rr,{className:"w-4 h-4"}),(0,dr.jsxs)("span",{children:[t.start," - ",t.end]})]})]})]}),(0,dr.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:(0,dr.jsxs)("button",{onClick:()=>(async e=>{try{f(!0),o("");const t=await ur.get("".concat(ya,"/api/newspapers/week/").concat(e));u(t.data)}catch(a){console.error("Failed to load newspaper:",a),o("Failed to load newspaper for "+e)}finally{f(!1)}})(e.week_of),disabled:d,className:"flex items-center space-x-2 roman-button text-sm px-4 py-2",children:[d?(0,dr.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,dr.jsx)(Tr,{className:"w-4 h-4"}),(0,dr.jsx)("span",{children:"Read"})]})})]}),e.contributor_count>1&&(0,dr.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,dr.jsx)("p",{className:"text-xs text-gray-500",children:"Multi-contributor edition with stories from your network"})})]},e.week_of)}))}),e.length>0&&(0,dr.jsxs)("div",{className:"mt-8 roman-column rounded-lg p-6 bg-green-50",children:[(0,dr.jsx)("h3",{className:"font-semibold text-green-900 mb-4",children:"Archive Statistics"}),(0,dr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,dr.jsxs)("div",{className:"text-center",children:[(0,dr.jsx)("div",{className:"text-2xl font-bold text-green-800",children:e.length}),(0,dr.jsx)("div",{className:"text-sm text-green-700",children:"Total Editions"})]}),(0,dr.jsxs)("div",{className:"text-center",children:[(0,dr.jsx)("div",{className:"text-2xl font-bold text-green-800",children:e.reduce(((e,t)=>e+t.story_count),0)}),(0,dr.jsx)("div",{className:"text-sm text-green-700",children:"Total Stories"})]}),(0,dr.jsxs)("div",{className:"text-center",children:[(0,dr.jsx)("div",{className:"text-2xl font-bold text-green-800",children:Math.max(...e.map((e=>e.contributor_count)),0)}),(0,dr.jsx)("div",{className:"text-sm text-green-700",children:"Max Contributors"})]}),(0,dr.jsxs)("div",{className:"text-center",children:[(0,dr.jsx)("div",{className:"text-2xl font-bold text-green-800",children:e.length>0?Math.round(e.reduce(((e,t)=>e+t.story_count),0)/e.length):0}),(0,dr.jsx)("div",{className:"text-sm text-green-700",children:"Avg Stories/Week"})]})]})]}),(0,dr.jsxs)("div",{className:"mt-8 roman-column rounded-lg p-6 bg-gray-50",children:[(0,dr.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"About the Archive:"}),(0,dr.jsxs)("ul",{className:"text-sm text-gray-800 space-y-1",children:[(0,dr.jsx)("li",{children:"\u2022 Every weekly edition is automatically saved to your archive"}),(0,dr.jsx)("li",{children:"\u2022 Use the search function to find specific weeks or editions"}),(0,dr.jsx)("li",{children:'\u2022 Click "Read" to view any past edition in the flipbook format'}),(0,dr.jsx)("li",{children:"\u2022 Archives are preserved permanently for your newspaper history"}),(0,dr.jsx)("li",{children:"\u2022 Share archive links with friends to show them past editions"})]})]})]});var y},va=e=>{let{children:t}=e;const{user:n,loading:r}=pr();return r?(0,dr.jsx)("div",{className:"loading",children:(0,dr.jsx)("div",{className:"roman-header",style:{fontSize:"1.5rem"},children:"Loading Acta Diurna..."})}):n?t:(0,dr.jsx)(ve,{to:"/login",replace:!0})};const xa=function(){return(0,dr.jsx)(mr,{children:(0,dr.jsx)(Ce,{children:(0,dr.jsxs)(we,{children:[(0,dr.jsx)(xe,{path:"/login",element:(0,dr.jsx)(Or,{})}),(0,dr.jsx)(xe,{path:"/register",element:(0,dr.jsx)(Or,{})}),(0,dr.jsx)(xe,{path:"/",element:(0,dr.jsx)(va,{children:(0,dr.jsx)(_r,{children:(0,dr.jsx)(Fr,{})})})}),(0,dr.jsx)(xe,{path:"/invitations",element:(0,dr.jsx)(va,{children:(0,dr.jsx)(_r,{children:(0,dr.jsx)(Hr,{})})})}),(0,dr.jsx)(xe,{path:"/contributors",element:(0,dr.jsx)(va,{children:(0,dr.jsx)(_r,{children:(0,dr.jsx)(Kr,{})})})}),(0,dr.jsx)(xe,{path:"/stories",element:(0,dr.jsx)(va,{children:(0,dr.jsx)(_r,{children:(0,dr.jsx)(ra,{})})})}),(0,dr.jsx)(xe,{path:"/newspaper",element:(0,dr.jsx)(va,{children:(0,dr.jsx)(_r,{children:(0,dr.jsx)(ha,{})})})}),(0,dr.jsx)(xe,{path:"/archive",element:(0,dr.jsx)(va,{children:(0,dr.jsx)(_r,{children:(0,dr.jsx)(ga,{})})})})]})})})};i.createRoot(document.getElementById("root")).render((0,dr.jsx)(l.StrictMode,{children:(0,dr.jsx)(xa,{})}))})();
//# sourceMappingURL=main.68fd2657.js.map