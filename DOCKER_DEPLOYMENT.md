# 🐳 **Simple Docker Deployment Guide**

## **What This Does**
- Builds React frontend into static files
- Serves everything from a single FastAPI container  
- Much simpler than managing two separate services

## 🚀 **Super Simple Deployment (15 minutes total)**

### **Step 1: Push to GitHub** (2 minutes)
```bash
git add .
git commit -m "Docker deployment ready"
git push origin main
```

### **Step 2: Set up MongoDB Atlas** (5 minutes)
1. Go to [mongodb.com/atlas](https://www.mongodb.com/atlas) → Create free cluster
2. Create database user → Allow access from anywhere (0.0.0.0/0)
3. **Copy connection string** (you'll need this!)

### **Step 3: Deploy to Render** (5 minutes)
1. Go to [render.com](https://render.com) → **New** → **Blueprint**
2. Connect your GitHub repository
3. Render detects `render.yaml` → **Apply**
4. Set **MONGO_URL** environment variable to your Atlas connection string
5. Wait for build (~10 minutes)

### **Step 4: Test** (3 minutes)
- Visit your app URL (e.g., `https://acta-diurna-xxxx.onrender.com`)
- Register account → Login → Test features
- Everything works from one URL! 🎉

---

## 📋 **Environment Variables Needed**

Set these in Render dashboard:

| Variable | Value | Example |
|----------|--------|---------|
| `MONGO_URL` | Your MongoDB Atlas connection string | `mongodb+srv://user:pass@cluster.mongodb.net/acta_diurna` |
| `SECRET_KEY` | Auto-generated by Render | *(auto-generated)* |
| `ENVIRONMENT` | `production` | `production` |

---

## 🔧 **How It Works**

### **Single Container Architecture:**
```
┌─────────────────────────────────┐
│           Docker Container       │
│                                 │
│  ┌─────────────┐ ┌─────────────┐│
│  │   React     │ │   FastAPI   ││
│  │  (static)   │ │  (server)   ││
│  └─────────────┘ └─────────────┘│
│                                 │
│      Same Port & Domain         │
└─────────────────────────────────┘
```

### **Benefits:**
- ✅ **One service** instead of two
- ✅ **No CORS issues** (same origin)
- ✅ **Simpler deployment** (single container)
- ✅ **Lower cost** (one service on free tier)

---

## 🐛 **Troubleshooting**

### **Build Fails?**
Check Render build logs for:
- **Node.js issues**: Frontend build problems
- **Python issues**: Backend dependency problems
- **Missing files**: Make sure all files are in GitHub

### **App loads but API doesn't work?**
- Check `MONGO_URL` is set correctly
- Verify MongoDB Atlas allows connections from anywhere
- Check Render logs for database connection errors

### **Frontend doesn't load?**
- Make sure React build completed successfully
- Check for missing static files in build logs

---

## 🎯 **What You Get**

**Single URL serves everything:**
- `https://your-app.onrender.com/` → React frontend
- `https://your-app.onrender.com/api/health` → FastAPI backend
- `https://your-app.onrender.com/docs` → API documentation

**Perfect for:**
- ✅ Simple deployment
- ✅ Testing and demos  
- ✅ MVP launches
- ✅ Cost-effective hosting

---

## 🚀 **Ready to Deploy?**
1. Push your code to GitHub
2. Set up MongoDB Atlas  
3. Use Render Blueprint deployment
4. Set MongoDB connection string
5. Wait for build and test!

**That's it! Much simpler than the two-service approach.** 🎉